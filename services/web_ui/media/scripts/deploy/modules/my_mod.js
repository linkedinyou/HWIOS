require.def("modules/my_mod",[],function(){function f(){$(".main").undelegate("#blog-content a","click")}function e(){application.ws.method("^/my_mod/message/$",function(a){console.log(a),$("#latest-message").html(a.data.text)}),application.ws.method("^/my_mod/notify_leave/$",function(a){$("online_profile").empty(),$.each(a.data.online,function(a,b){$("online_profile").append("<li>"+b+"</li>")})})}function d(){}function c(){application.functions.my_mod={route:function(b,c){a==undefined&&(a=[[XRegExp("^/my_mod/$"),this.view_my_mod]]),application.route_uri_to_mod_function(b,a,c)},view_my_mod:function(){application.ws.remote("/my_mod/",{},function(a){application.functions.ui.transition(a.data.dom.main,$(".main"))})},notify:function(a){var b=$("#textarea-my_mod").val();application.ws.remote("/my_mod/notify/",{text:b},function(a){$("#message-status").html(a.data.sent+" characters sent to "+a.data.clients+" others!")})},trip:function(a){b()}}}function b(){application.ws.remote("/my_mod/trip/",{},function(a){var c=parseInt(a.data.trips/a.data.server_time);$("#trips-total").html(a.data.trips);if(a.data.continue==!0){$("#trips-second").html(c);return b()}$("#trips-second").html("-")})}var a;return{init:function(a,b){c(),d(),e(),application.functions.my_mod.route(a,b);return"my_mod"},load:function(a,b){d(),application.functions.my_mod.route(a,b)},clean_up:function(){}}})