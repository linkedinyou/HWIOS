require.def("modules/settings",[],function(a){function d(){application.ws.method("^/settings/modified/$",function(a){application.functions.settings.view_settings(a,!0)})}function c(){application.functions.settings={},application.functions.settings.route=function(a,b){routes=[[XRegExp("^/settings/$"),application.functions.settings.view_settings]],application.route_uri_to_mod_function(a,routes,b)},application.functions.settings.view_settings=function(a,b){b==undefined?application.ws.remote("/settings/",{},function(a){application.functions.ui.transition(a.data.dom.main,$(".main")),$tabs=$("#settings_tabs").tabs()}):(application.functions.ui.transition(a.data.dom.main,$(".main")),$tabs=$("#settings_tabs").tabs())},application.functions.settings.update_settings=function(){var a=$("form:visible").serializeObject(),b=$tabs.tabs("option","selected");application.ws.remote("/data/settings/save/",{params:a},function(a){application.functions.ui.transition(a.data.dom.main,$(".main")),$tabs=$("#settings_tabs").tabs(),$tabs.tabs("option","selected",b);switch(a.status.code){case"SETTINGS_UPDATE_OK":break;case"INVALID_FORM":$(".errorlist").each(function(){$(this).next().prepend('<span class="ui-icon ui-icon-info"></span>')})}})}}function b(){$(document).bind("MAP_FREE_LOCATION MAP_REGION_LOCATION",function(b,c,d){$("input").each(function(b){$(this).attr("id")=="id_center_x"?$(this).val(c):$(this).attr("id")=="id_center_y"?$(this).val(d):$(this).attr("id")=="id_center_z"&&$(this).val(a.get_zoom())})})}return{init:function(a,e){b(),c(),d(),application.functions.settings.route(a,e);return"settings"},load:function(a,c){b(),application.functions.settings.route(a,c)},clean_up:function(){}}})